<!DOCTYPE html>
<html lang="en">
<head>
<style>
    #question {
        white-space: pre-wrap;
        font-size: 16px; /* Question内容的字体大小 */
    }
    .small-font {
        font-size: 14px; /* 比Question内容小两号 */
    }
    #answer {
        width: 100%; /* Adjust the answer input width to the full page width */
        box-sizing: border-box; /* Ensure padding and border are included in the element's total width */
        margin-bottom: 10px; /* Add some space between the input box and the button */
    }
    #submit {
        width: 100%; /* Adjust the submit button width to the full page width */
        box-sizing: border-box; /* Ensure padding and border are included in the element's total width */
    }
</style>

<meta charset="UTF-8">
<title>Quiz Game</title>
<script>
// 题库数据
const quizData =  [
  {
    "source": "1.1",
    "question": "Are the __________(strawberry) sweet or sour?",
    "answer": "strawberries"
  },
  {
    "source": "1.2",
    "question": "A pair of glasses ____on the bed. It’s my mother’s.  \n[is | are | am]",
    "answer": "is"
  },
  {
    "source": "1.3",
    "question": "I can’t write with the pencil. It’s not__________.  \n[sharp | hard | blunt]",
    "answer": "sharp"
  },
  {
    "source": "1.4",
    "question": "Are insects color-blind? (negative answer)_____________",
    "answer": "No, they aren’t."
  },
  {
    "source": "2.1",
    "question": "what does the sun do it rises in the morning (copy sentences in correct format)_______________",
    "answer": "What does the sun do? It rises in the morning."
  },
  {
    "source": "2.2",
    "question": "at noon the sun is high in the sky the trees shadow grows short",
    "answer": "At noon, the sun is high in the sky. The tree’s shadow grows short."
  },
  {
    "source": "2.3",
    "question": "’ea’ T or F? [tea meat]",
    "answer": "T"
  },
  {
    "source": "2.4",
    "question": "’a’ T or F? [shadow many]",
    "answer": "F"
  },
  {
    "source": "2.5",
    "question": "Can you __(see) the sun in the evening? No, I____(can not).",
    "answer": "see can’t"
  },
  {
    "source": "2.6",
    "question": "Those books are thick and new. (改为否定句但意思不变)_______________",
    "answer": "Those books aren’t thin or old."
  },
  {
    "source": "2.7",
    "question": "Is this cat white? (positive sentence)__________",
    "answer": "This cat is white."
  },
  {
    "source": "3.1",
    "question": "_________(not bite) me, please!",
    "answer": "Don’t bite"
  },
  {
    "source": "3.2",
    "question": "We_______(have) any fruit. Let’s go and ____(buy) some now.",
    "answer": "don’t have buy"
  },
  {
    "source": "3.3",
    "question": "___water___in the glass? A. How many....are there B. How much....are there C. How much....is there",
    "answer": "C"
  },
  {
    "source": "3.4",
    "question": "Jack has a brother. His brother’s name is Mike. <br>Sometimes Jack eats some of his brother’s apples. And his brother often hits him for that. <br>One day, Jack’s teacher asked Jack and his classmates: \"If your brother has five apples, and you have eaten three of them, tell me...\" <br>\"He’ll certainly give me a good beating,\" Jack says quickly.    <br><br>( ) It’s not right for _____ to hit Jack. A. Mike B. the teacher C. Jack’s classmates.",
    "answer": "A"
  },
  {
    "source": "4.1",
    "question": "who else would like to join the volleyball club(加标点抄写正确句子注意大小写) _______________________________",
    "answer": "Who else would like to join the volleyball club?"
  },
  {
    "source": "4.2",
    "question": "Mike__(have) nine apple pies. He ___(give) me five.",
    "answer": "has gives"
  },
  {
    "source": "4.3",
    "question": "My mother never ___(sing) and ___(dance) on Sundays.",
    "answer": "sings dances"
  },
  {
    "source": "4.4",
    "question": "Daniel watches TV every evening. (change to negative)______________",
    "answer": "Daniel doesn’t watch TV every evening."
  },
  {
    "source": "4.5",
    "question": "We go to school every morning. (change to negative)________________",
    "answer": "We don’t go to school every morning."
  },
  {
    "source": "4.6",
    "question": "He speaks English very well. (change to negative) _______________",
    "answer": "He doesn’t speak English very well."
  },
  {
    "source": "4.7",
    "question": "The moon is like a ball. It looks bigger when it is much nearer to the earth. But it is much smaller than the sun. It is smaller than the stars. The light of the moon comes from the sun. It has no light of its own. <br><br>( )The moon is ___ than the stars. A. bigger B. brighter C. smaller D. Darker",
    "answer": "C"
  },
  {
    "source": "4.8",
    "question": "The stars look smaller than the sun and the moon. But most of the stars are bigger than the sun. They look small because they are very far away from us. The stars are in the sky all day. But the light from the sun is too bright, so we can’t see the stars in the day.   <br><br>( )___________are in the sky all day.  [The sun | The moon | The stars | stars]",
    "answer": "The stars"
  },
  {
    "source": "m1.1a",
    "question": "Listen and choose. ( ) A. There is an apple. B. It’s an apple. C. There are four.",
    "answer": "A"
  },
  {
    "source": "m1.2f",
    "question": "Listen, ’T’ or ’F’?. ( ) Miss Fang can make a phone call to her children to ask for help.",
    "answer": "F"
  },
  {
    "source": "m1.3sun",
    "question": "Listen and write the word. It is _____________",
    "answer": "Sunday"
  },
  {
    "source": "m1.4yus",
    "question": "Listen and write the word. She is sitting under an _____________",
    "answer": "umbrella"
  },
  {
    "source": "m1.5",
    "question": "[Complete with words in same kind.] There are some apples, ______(桃子) and an _______(橘子) on the table.",
    "answer": "peaches orange"
  },
  {
    "source": "m1.6",
    "question": "[knife come rise boy one have take do] Mr Li _________ a walk on the path after dinner yesterday.",
    "answer": "took"
  },
  {
    "source": "m1.7",
    "question": "[knife come rise boy one have take do] Here _______ a man on an elephant.",
    "answer": "comes"
  },
  {
    "source": "m1.8",
    "question": "I always sit in the sun and have a rest ___________sunny afternoons.  [in | at | on]",
    "answer": "on"
  },
  {
    "source": "m1.9",
    "question": "William________(want) to go to the next town, but he _____(not) know the way.",
    "answer": "wants doesn’t"
  },
  {
    "source": "m1.10",
    "question": "William thinks the bird and the stone are a man and _______(ask) some questions. At las the bird ____(fly) away.",
    "answer": "asks flies"
  },
  {
    "source": "m1.11",
    "question": "Some kiwi fruit come from the south of China. The kiwi fruit from the other countries are very expensive. I like the kiwi fruit from China, because they are cheap and also very tasty. Q: Which kiwi fruit do you like, from the south of China or from the other countries? Why?_____________(注意回答时要带上问句中的south；两个问号对应两个答句。两个答句中间有句点，并且每句首字母大写）",
    "answer": "I like the kiwi fruit from the south of China. Because they are cheap and also very tasty."
  },
  {
    "source": "m1.12",
    "question": "__________morning, the sun rises in the sky. But__________noon, my shadow ____________(grow) short. And ________afternoon, the sun goes down.",
    "answer": "In the at grows in the"
  },
  {
    "source": "z2.1",
    "question": "哪个发音不同：\nA. toe中的oe   B. boat中的oa   C. mouse中的ou   D. poster中的o",
    "answer": "C"
  },
  {
    "source": "z2.2",
    "question": "Taste the _____(图片里画着三个苹果). They are sweet and nice.",
    "answer": "apples"
  },
  {
    "source": "z2.3",
    "question": "选择括号中的词语，以适当的形式填空。(we be swim go like do come)\nMark_____playing cards with his sister.\nThis pair of swimming goggles ____ for my little brother.\nTomorrow is Saturday. Would you like_________to my home?",
    "answer": "likes is to come"
  },
  {
    "source": "z2.4",
    "question": "Paul is playing basketball in the playground. (对is playing basketball提问，每格一次）\n_________Paul__________in the playground?",
    "answer": "What's doing"
  },
  {
    "source": "z2.5",
    "question": "每空一词。\nIt is Monday morning. It's half past nine now. The __________(动物) are having an English class in the___________(教室). Mr Bear is _________(stay) behind the teacher's desk. The rabbit is handing her homework to ___________.",
    "answer": "animals classroom staying him"
  },
  {
    "source": "z2.6",
    "question": "Cats and dogs have different ways of showing their feelings. If your dog bards, you know someone is at the door of your house. But cats never do that. Both of them wag their tails, but it means different feelings. If a dog wags its tail, you know it's happy. When a cat wags its tail, it is angry. They also lick their owners. It is a way that dogs show their love for their owners. If cats lick your hands, they just want to eat the salt on your hands. To show that they love you, cats and dogs may sit besides you.\n\n(T or F?) Cats and dogs have almost the same ways of showing their feeling.",
    "answer": "F"
  },
  {
    "source": "z2.7",
    "question": "Do you know there are two kinds of football games in the world? One is American football, and the other is called soccer. Soccer is very popular in Europe (欧洲) and Asia (亚洲). But Asians and Europeans don't call it soccer; they can call it football. There are eleven players on a team, and the ball is round. Only the goalkeeper (守门员) can play using his hands and feet, all the other players must use their feet.\n\nIn the USA soccer is not very popular. People like playing American football more than soccer. There are also eleven players on a team. The ball isn't round, it's oval shaped. All the players can use their hands and feet to play with the ball. The goal for American football is larger than the one for soccer. American football is quite different from soccer.\n\nSoccer is called ______ in China. 【A. football  B. Chinese football  C. soccer】\nHow many players on a team can play soccer with their hands? 【A. Ten   B. Eleven   C. Only one】\nThe football in China is _____ 【A. not round   B. oval shaped   C. round】",
    "answer": "A C C"
  },
  {
    "source": "z2.8",
    "question": "Do you know there are two kinds of football games in the world? One is American football, and the other is called soccer. Soccer is very popular in Europe (欧洲) and Asia (亚洲). But Asians and Europeans don't call it soccer; they can call it football. There are eleven players on a team, and the ball is round. Only the goalkeeper (守门员) can play using his hands and feet, all the other players must use their feet.\n\nIn the USA soccer is not very popular. People like playing American football more than soccer. There are also eleven players on a team. The ball isn't round, it's oval shaped. All the players can use their hands and feet to play with the ball. The goal for American football is larger than the one for soccer. American football is quite different from soccer.\n\n填空:\nSoccer rules: Only the goalkeeper can play using his hands and feet, all the other players must use their __________.\nAmerican football rules: All the ____________can use their hands and feet to play with the ball.",
    "answer": "feet players"
  },
  {
    "source": "z2.9",
    "question": "My favourite _________(动物是狗). _______(它们喜欢）eating meat. ____________can run _______people(比人们跑得快).",
    "answer": "animals are dogs They like They faster than"
  },
  {
    "source": "7.1",
    "question": "哪个发音与众不同：A. boat的oa  B. robot中的第一个o   C.cow中的ow   D. yellow中的ow",
    "answer": "C"
  },
  {
    "source": "7.2",
    "question": "They ___________(play) football in the park now.",
    "answer": "are playing"
  },
  {
    "source": "7.3",
    "question": "Open the door, please. (改为否定句）",
    "answer": "Don't open the door, please."
  },
  {
    "source": "7.4",
    "question": "根据首字母填空：\nSam is a d______. It has two long e______ and two big eyes. Sam likes eating b____. Look, it is eating a big bone now. Sam has got four long l_________. He can run very fast. I l________ Sam very much!",
    "answer": "dog ears bones legs like"
  }
];

let totalAnswered = 0;
let correctAnswers = 0;
let incorrectAnswers = 0;
let remainingQuestions = [...quizData]; // 未回答或回答错误的题目

// 语音合成函数
function speak(text) {
    const speech = new SpeechSynthesisUtterance(text);
    const voices = window.speechSynthesis.getVoices();
    const femaleVoice = voices.find(voice => voice.name.includes('Google US English Female')) || voices.find(voice => voice.gender === 'female') || voices[0];
    speech.voice = femaleVoice;
    window.speechSynthesis.speak(speech);
}

// 标准化输入文本中的引号
function normalizeQuotes(text) {
    return text.replace(/['`’]/g, "'").replace(/["“”]/g, '"');
}

// 提交答案的处理
function submitAnswer() {
    const userAnswer = normalizeQuotes(document.getElementById('answer').value);
    const currentQuestion = remainingQuestions[0]; // 当前题目
    const normalizedAnswer = normalizeQuotes(currentQuestion.answer);

    totalAnswered++;
    if (userAnswer === normalizedAnswer) {
        correctAnswers++;
        speak("oh yes!"); // 正确时播放 "oh yes!"
        // 从剩余题目中移除
        remainingQuestions.shift();
    } else {
        speak("oh no!"); // 错误时播放 "oh no!"
        incorrectAnswers++;
        showAnswerDialog(currentQuestion.question, currentQuestion.answer, userAnswer);
    }
    updateStats();
    displayQuestion(); // 显示下一个问题
}

// 显示题目
function displayQuestion() {
    if (remainingQuestions.length === 0) {
        speak("Test Completed!!!");
        return;
    }

    // 随机选择一个题目
    const randomIndex = Math.floor(Math.random() * remainingQuestions.length);
    const currentQuestion = remainingQuestions[randomIndex];
    // 将选择的题目放到数组的开头
    [remainingQuestions[0], remainingQuestions[randomIndex]] = [currentQuestion, remainingQuestions[0]];

    // 将题目文本中的 <br> 替换为换行符
    const formattedQuestion = currentQuestion.question.replace(/<br\s*\/?>/g, '\n');
    document.getElementById('question').innerHTML = `<span class="small-font">Source: ${currentQuestion.source}</span><br><br>${formattedQuestion}`;

    document.getElementById('answer').value = ''; // 清空答案输入框
}

// 更新统计数据
function updateStats() {
    const accuracy = (correctAnswers / totalAnswered * 100).toFixed(2);
    document.getElementById('stats').textContent = 
        `Answered: ${totalAnswered}; Correct: ${correctAnswers}; Incorrect: ${incorrectAnswers}; Accuracy: ${accuracy}%; Remain:${remainingQuestions.length}`;
}

// 显示答案对话框
function showAnswerDialog(question, correctAnswer, userAnswer) {
    // 将正确答案和用户答案中的空格替换为星号
    const correctAnswerMasked = correctAnswer.replace(/\s/g, '*');
    const userAnswerMasked = userAnswer.replace(/\s/g, '*');
    
    // 构建对话框消息
    const message = `Question: ${question}\nCorr Answer: ${correctAnswerMasked}\nYour Answer: ${userAnswerMasked}`;
    
    // 显示对话框
    alert(message);
}

// 页面加载完成后初始化
window.onload = function() {
    document.getElementById('totalQuestions').textContent = quizData.length;
    displayQuestion();
    updateStats();

    // 监听回车键提交答案
    document.getElementById('answer').addEventListener('keypress', function(event) {
        if (event.keyCode === 13) { // 回车键的键码是13
            submitAnswer();
        }
    });

    // 点击提交按钮提交答案
    document.getElementById('submit').onclick = submitAnswer;
};
</script>
</head>
<body>
<h2>Quiz Game</h2>
<p class="small-font">Total Questions: <span id="totalQuestions">0</span></p>
<p id="question"></p>
<input type="text" id="answer" placeholder="Enter your answer here">
<button id="submit">Submit Answer</button>
<h3>Stats</h3>
<p id="stats">Answered: 0; Correct: 0; Incorrect: 0; Accuracy: 0%</p>
</body>
</html>
